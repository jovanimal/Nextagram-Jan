(this["webpackJsonpnextagram-2020"]=this["webpackJsonpnextagram-2020"]||[]).push([[0],{40:function(e,a,t){e.exports=t(78)},45:function(e,a,t){},63:function(e,a,t){},78:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(15),c=t.n(l),o=(t(45),t(7)),s=t(10),i=t.n(s),m=(t(63),t(81)),u=t(82),d=t(83),p=t(84),g=t(85),E=t(86),f=t(17),b=t.n(f),h=function(e){var a=e.primaryColor,t=e.secondaryColor,n=e.size;return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",background:"transparent",display:"block",shapeRendering:"auto"},width:n,height:n,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},r.a.createElement("g",null,r.a.createElement("circle",{cx:"75.9234",cy:"50",r:"4",fill:t},r.a.createElement("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",values:"95;35",keyTimes:"0;1",begin:"-0.67s"}),r.a.createElement("animate",{attributeName:"fill-opacity",repeatCount:"indefinite",dur:"1s",values:"0;1;1",keyTimes:"0;0.2;1",begin:"-0.67s"})),r.a.createElement("circle",{cx:"36.3234",cy:"50",r:"4",fill:t},r.a.createElement("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",values:"95;35",keyTimes:"0;1",begin:"-0.33s"}),r.a.createElement("animate",{attributeName:"fill-opacity",repeatCount:"indefinite",dur:"1s",values:"0;1;1",keyTimes:"0;0.2;1",begin:"-0.33s"})),r.a.createElement("circle",{cx:"56.1234",cy:"50",r:"4",fill:t},r.a.createElement("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",values:"95;35",keyTimes:"0;1",begin:"0s"}),r.a.createElement("animate",{attributeName:"fill-opacity",repeatCount:"indefinite",dur:"1s",values:"0;1;1",keyTimes:"0;0.2;1",begin:"0s"}))),r.a.createElement("g",{transform:"translate(-15 0)"},r.a.createElement("path",{d:"M50 50L20 50A30 30 0 0 0 80 50Z",fill:a,transform:"rotate(90 50 50)"}),r.a.createElement("path",{d:"M50 50L20 50A30 30 0 0 0 80 50Z",fill:a,transform:"rotate(31.6851 50 50)"},r.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",values:"0 50 50;45 50 50;0 50 50",keyTimes:"0;0.5;1"})),r.a.createElement("path",{d:"M50 50L20 50A30 30 0 0 1 80 50Z",fill:a,transform:"rotate(-31.6851 50 50)"},r.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",values:"0 50 50;-45 50 50;0 50 50",keyTimes:"0;0.5;1"}))))},v=function(e){var a=e.userId,t=Object(n.useState)([]),l=Object(o.a)(t,2),c=l[0],s=l[1],m=Object(n.useState)(!0),u=Object(o.a)(m,2),d=u[0],p=u[1];return Object(n.useEffect)((function(){i.a.get("https://insta.nextacademy.com/api/v2/images?userId=".concat(a)).then((function(e){s(e.data),p(!1)}))}),[a]),d?r.a.createElement(h,{primaryColor:"#fcba03",secondaryColor:"#752bed",size:"150px"}):r.a.createElement(r.a.Fragment,null,c.map((function(e){return r.a.createElement(b.a,{key:e.id,style:{display:"inline-block",margin:"0 0 1em",width:"100%"},src:e.url,alt:"anything"})})))},y=t(9),O=function(e){var a=e.users;return e.isLoading?r.a.createElement(h,{size:"250px",primaryColor:"#ecf542",secondaryColor:"#f5428a"}):r.a.createElement(m.a,null,r.a.createElement(u.a,null,a.map((function(e){return r.a.createElement(d.a,{key:e.id,md:12},r.a.createElement(p.a,{className:"my-3"},r.a.createElement(g.a,null,r.a.createElement(u.a,null,r.a.createElement(d.a,{md:4},r.a.createElement(E.a,{tag:y.b,to:"/user/".concat(e.id,"/").concat(e.username),className:"text-dark text-left"},e.username),r.a.createElement(b.a,{className:"w-75 mx-auto d-block rounded",src:e.profileImage,alt:e.username})),r.a.createElement(d.a,{md:8},r.a.createElement("div",{style:{columnCount:3,columnGap:"1em"}},r.a.createElement(v,{userId:e.id})))))))}))))},w=t(18),j=function(e){e.users;var a=Object(w.f)(),t=a.id,l=a.username,c=Object(n.useState)([]),s=Object(o.a)(c,2),u=s[0],d=s[1];return Object(n.useEffect)((function(){i.a.get("https://insta.nextacademy.com/api/v1/images?userId=".concat(t)).then((function(e){d(e.data)}))}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{fluid:!0},r.a.createElement("h1",null,l,"'s Profile"),r.a.createElement(p.a,{className:"w-100 bg-transparent p-4 border-0"},0===u.length?r.a.createElement(h,{primaryColor:"white",secondaryColor:"blue",size:"200px"}):r.a.createElement("div",{style:{columnCount:3,columnGap:"1em"}},u.map((function(e,a){return r.a.createElement(b.a,{key:a,src:e,style:{display:"inline-block",margin:"0 0 1em",width:"100%"}})}))))))},k=t(87),S=t(88),x=t(89),C=t(106),U=function(){var e=Object(n.useState)(null),a=Object(o.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(null),s=Object(o.a)(c,2),u=s[0],d=s[1],p=Object(n.useState)(null),g=Object(o.a)(p,2),E=g[0],f=g[1];return r.a.createElement(m.a,{className:"pt-5"},r.a.createElement("h6",null,"Upload New Image"),r.a.createElement("div",{className:"border border-light rounded mx-auto d-block mt-4",style:{height:"500px",width:"500px",position:"relative"}},t?E?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},E),r.a.createElement(k.a,{outline:!0,color:"success",tag:y.c,to:"/profile",style:{position:"absolute",left:"50%",top:"65%",transform:"translate(-50%, -50%)"}},"My profile")):r.a.createElement("img",{className:"w-75",style:{position:"absolute",left:"50%",top:"50%",height:"400px",width:"auto",transform:"translate(-50%, -50%)"},src:t,alt:"preview"}):r.a.createElement("h2",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},"Choose image to preview")),r.a.createElement(S.a,{onSubmit:function(e){e.preventDefault();var a=new FormData;a.append("image",u);var t=localStorage.getItem("authToken");i.a.post("https://insta.nextacademy.com/api/v1/images/",a,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){e.data.success?f("Image uploaded successfully!"):f("Error uploading Image.")})).catch((function(e){console.log(e.response),f("Major error, contact admin!")}))}},r.a.createElement(x.a,{className:"w-50 mx-auto d-block"},r.a.createElement(C.a,{type:"file",id:"exampleCustomFileBrowser",name:"customFile",className:"mt-4",onChange:function(e){var a=e.target.files[0],t=URL.createObjectURL(a);l(t),d(a)}})),r.a.createElement(k.a,{outline:!0,color:"primary"},"Upload")))},N=t(98),I=t(99),T=t(100),L=t(101),P=t(102),A=t(103),M=t(104),B=t(94),F=t(105),z=t(95),R=t(96),J=t(97),D=t(90),G=t(91),H=function(e){var a=e.loginUser,t=e.toggle,l=Object(n.useState)(""),c=Object(o.a)(l,2),s=c[0],i=c[1],m=Object(n.useState)(""),u=Object(o.a)(m,2),d=u[0],p=u[1],g=function(){t(),i(""),p("")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{onSubmit:function(e){e.preventDefault(),a(s,d,g)}},r.a.createElement(x.a,null,r.a.createElement(D.a,null,"Username"),r.a.createElement(G.a,{type:"text",placeholder:"Enter Username...",value:s,onChange:function(e){return i(e.target.value)}})),r.a.createElement(x.a,null,r.a.createElement(D.a,null,"Password"),r.a.createElement(G.a,{type:"password",placeholder:"Enter password...",value:d,onChange:function(e){return p(e.target.value)}})),r.a.createElement(k.a,{className:"mx-auto d-block",outline:!0,color:"primary"},"Login")))},W=t(92),Z=t(93),_=t(11),X={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0},Y=function(e){var a=e.signUpUser,t=e.toggle,l=Object(n.useState)(null),c=Object(o.a)(l,2),s=c[0],m=c[1],u=Object(n.useState)(!0),d=Object(o.a)(u,2),p=d[0],g=d[1],E=Object(n.useState)(""),f=Object(o.a)(E,2),b=f[0],h=f[1],v=Object(n.useState)(""),y=Object(o.a)(v,2),O=y[0],w=y[1],j=Object(n.useState)(""),C=Object(o.a)(j,2),U=C[0],N=C[1],I=Object(n.useState)(""),T=Object(o.a)(I,2),L=T[0],P=T[1],A=function(){h(""),w(""),N(""),P(""),t()},M=function(e){clearTimeout(s);var a=e.target.value;w(a);var t=setTimeout((function(){!function(e){i.a.get("https://insta.nextacademy.com/api/v1/users/check_name?username=".concat(e)).then((function(e){e.data.valid?g(!0):g(!1)}))}(a)}),500);m(t)};return r.a.createElement(S.a,{onSubmit:function(e){return e.preventDefault(),b&&O&&U&&L?U.length<8?_.b.error("Password is too short!",X):U!==L?_.b.error("Passwords are not matching!",X):O.length<=6?_.b.error("Username is too short!",X):p?void a(O,b,U,A):_.b.error("Username is invalid, please check!",X):_.b.error("All fields must be filled!",X)}},r.a.createElement(x.a,null,r.a.createElement(D.a,null,"Email Address"),r.a.createElement(G.a,{type:"text",placeholder:"Enter your email",value:b,onChange:function(e){return h(e.target.value)}})),r.a.createElement(x.a,null,r.a.createElement(D.a,null,"Username"),r.a.createElement(G.a,Object.assign({type:"text",placeholder:"Choose a username",value:O,onChange:function(e){return M(e)}},O.length?O.length<=6?{invalid:!0}:p?{valid:!0}:{invalid:!0}:null)),O.length?O.length<=6?r.a.createElement(W.a,{invalid:!0},"Must be at least 6 characters"):p?r.a.createElement(W.a,{valid:!0},"Sweet! That name is available"):r.a.createElement(W.a,{invalid:!0},"Sorry! Username is taken"):null,r.a.createElement(Z.a,null,"Enter a username between 6 and 20 characters")),r.a.createElement(x.a,null,r.a.createElement(D.a,null,"Password"),r.a.createElement(G.a,{type:"password",placeholder:"Choose a password, min 6 characters",value:U,onChange:function(e){return N(e.target.value)}})),r.a.createElement(x.a,null,r.a.createElement(D.a,null,"Confirm Password"),r.a.createElement(G.a,{type:"password",placeholder:"Confirm your password",value:L,onChange:function(e){return P(e.target.value)}})),r.a.createElement(k.a,{className:"mx-auto d-block",outline:!0,color:"primary"},"Sign Up"))},$=function(e){var a=e.buttonLabel,t=e.signUpUser,l=e.loginUser,c=Object(n.useState)(!1),s=Object(o.a)(c,2),i=s[0],m=s[1],u=Object(n.useState)(!0),d=Object(o.a)(u,2),p=d[0],g=d[1],E=function(){m(!i),g(!0)};return r.a.createElement("div",null,r.a.createElement(B.a,{style:{cursor:"pointer"},onClick:E},a),r.a.createElement(F.a,{isOpen:i,toggle:E},r.a.createElement(z.a,{toggle:E},p?"Login":"Sign Up"),r.a.createElement(R.a,null,p?r.a.createElement(H,{loginUser:l,toggle:E}):r.a.createElement(Y,{signUpUser:t,toggle:E})),r.a.createElement(J.a,null,r.a.createElement(k.a,{color:"link",onClick:function(){return g(!p)}},p?"Not registered? Sign Up Now":"Already a user? Sign In"))))},q=function(e){var a=e.signUpUser,t=e.loginUser,l=e.currentUser,c=e.logoutUser,s=Object(n.useState)(!1),i=Object(o.a)(s,2),m=i[0],u=i[1];return r.a.createElement("div",null,r.a.createElement(N.a,{color:"dark",dark:!0,expand:"md"},r.a.createElement(I.a,null,"Nextagram"),r.a.createElement(T.a,{onClick:function(){return u(!m)}}),r.a.createElement(L.a,{isOpen:m,navbar:!0},r.a.createElement(P.a,{className:"ml-auto",navbar:!0},l?r.a.createElement(A.a,{className:"mr-5"},r.a.createElement(M.a,null,"Hello, ",l.username)):"",r.a.createElement(A.a,null,r.a.createElement(B.a,{tag:y.c,to:"/"},"Home")),l?r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,null,r.a.createElement(B.a,{tag:y.c,to:"/profile"},"My Profile")),r.a.createElement(A.a,null,r.a.createElement(B.a,{tag:y.c,to:"/image/upload"},"Upload")),r.a.createElement(A.a,null,r.a.createElement(B.a,{onClick:c,style:{cursor:"pointer"}},"Logout"))):r.a.createElement(A.a,null,r.a.createElement($,{buttonLabel:"Login",signUpUser:a,loginUser:t}))))))},K=function(){var e=Object(n.useState)(null),a=Object(o.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)([]),s=Object(o.a)(c,2),p=s[0],g=s[1],E=Object(w.e)();return Object(n.useEffect)((function(){var e=localStorage.getItem("userInfo");e?l(JSON.parse(e)):E.push("/"),i()({method:"GET",url:"https://insta.nextacademy.com/api/v1/images/me",headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}}).then((function(e){g(e.data)}))}),[]),t?(console.log(t),r.a.createElement("div",null,r.a.createElement(m.a,{className:"mt-5",fluid:!0},r.a.createElement(u.a,null,r.a.createElement(d.a,{md:6},r.a.createElement(b.a,{src:t.profile_picture,style:{width:"auto",borderRadius:"50%",height:"200px"},alt:"me"})),r.a.createElement(d.a,{md:6},r.a.createElement("h1",null,t.username),r.a.createElement(k.a,{className:"mt-4",color:"secondary",tag:y.c,to:"/image/upload"},"Upload New Image")))),r.a.createElement(m.a,null,r.a.createElement("hr",null),p.length>0?r.a.createElement("div",{style:{columnCount:4,columnGap:"1em"}},p.map((function(e,a){return r.a.createElement(b.a,{key:a,src:e,style:{width:"100%",margin:"0 0 1em",display:"block"}})}))):r.a.createElement("h1",{className:"mt-5"},"No Images to display! Make a post!")))):r.a.createElement(h,{primaryColor:"yellow",secondaryColor:"red",size:"200px"})};var Q={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0},V=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(!0),s=Object(o.a)(c,2),m=s[0],u=s[1],d=Object(n.useState)(null),p=Object(o.a)(d,2),g=p[0],E=p[1];return Object(n.useEffect)((function(){i.a.get("https://insta.nextacademy.com/api/v1/users/").then((function(e){l(e.data),u(!1)}));var e=localStorage.getItem("userInfo");e&&E(JSON.parse(e))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(q,{signUpUser:function(e,a,t,n){i()({method:"POST",url:"https://insta.nextacademy.com/api/v1/users/",data:{username:e,email:a,password:t}}).then((function(e){"success"===e.data.status?(_.b.success("Registered account!",Q),n()):_.b.warning("Oops, something went wrong!",Q)})).catch((function(e){var a=500;e.response.data.message.forEach((function(e){setTimeout((function(){_.b.error(e,Q)}),a),a+=500}))}))},loginUser:function(e,a,t){i()({method:"POST",url:"https://insta.nextacademy.com/api/v1/login",data:{username:e,password:a}}).then((function(e){201===e.status&&(_.b.success("Welcome back ".concat(e.data.user.username),Q),localStorage.setItem("authToken",e.data.auth_token),localStorage.setItem("userInfo",JSON.stringify(e.data.user)),E(e.data.user),t())})).catch((function(e){401===e.response.status&&_.b.error("Invalid credentials, check and try again.",Q)}))},logoutUser:function(){_.b.success("Successfully logged out, come back soon \ud83e\udd13",Q),localStorage.removeItem("authToken"),localStorage.removeItem("userInfo"),E(null)},currentUser:g}),r.a.createElement(_.a,null),r.a.createElement(w.a,{exact:!0,path:"/"},r.a.createElement(O,{users:t,isLoading:m})),r.a.createElement(w.a,{path:"/user/:id/:username"},r.a.createElement(j,{users:t})),r.a.createElement(w.a,{path:"/profile"},r.a.createElement(K,null)),r.a.createElement(w.a,{path:"/image/upload"},r.a.createElement(U,null)))};t(76),t(77),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(y.a,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.fe8f6986.chunk.js.map